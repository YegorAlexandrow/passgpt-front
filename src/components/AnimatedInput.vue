<template>
  <q-input
    v-model="newMessageText"
    rounded
    outlined
    type="text"
    placeholder="Ð’Ð°ÑˆÐµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ..."
    input-style="padding-left: 12px; padding-bottom: 12px;"
  >
  </q-input>
</template>

<script setup lang="ts">
import { ref, onMounted } from 'vue';

const prompts = [
  { emoji: 'ðŸ“š', text: 'ÐŸÐ¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÑŒ Ð·Ð°Ð´Ð°Ð½Ð¸Ñ Ð´Ð»Ñ Ð¸Ð·ÑƒÑ‡ÐµÐ½Ð¸Ñ ÑÐ»Ð¾Ð²' },
  { emoji: 'ðŸ“', text: 'ÐŸÐ¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÑŒ Ðº ÑÐºÐ·Ð°Ð¼ÐµÐ½Ñƒ' },
  { emoji: 'ðŸŽ¨', text: 'ÐŸÑ€ÐµÐ´Ð»Ð¾Ð¶Ð¸ Ð¸Ð´ÐµÑŽ Ð´Ð»Ñ ÐºÐ°Ñ€Ñ‚Ð¸Ð½Ñ‹' },
  { emoji: 'ðŸŽ¬', text: 'ÐŸÐ¾ÑÐ¾Ð²ÐµÑ‚ÑƒÐ¹ Ñ„Ð¸Ð»ÑŒÐ¼ Ð½Ð° Ð²ÐµÑ‡ÐµÑ€' },
  { emoji: 'ðŸ“…', text: 'ÐžÑ€Ð³Ð°Ð½Ð¸Ð·ÑƒÐ¹ Ð¼Ð¾Ð¹ Ð´ÐµÐ½ÑŒ' },
  { emoji: 'ðŸ’¡', text: 'ÐŸÑ€ÐµÐ´Ð»Ð¾Ð¶Ð¸ Ð¸Ð´ÐµÑŽ Ð´Ð»Ñ ÑÑ‚Ð°Ñ€Ñ‚Ð°Ð¿Ð°' },
  { emoji: 'ðŸ²', text: 'ÐŸÐ¾Ð´Ð±ÐµÑ€Ð¸ Ñ€ÐµÑ†ÐµÐ¿Ñ‚ Ð½Ð° ÑƒÐ¶Ð¸Ð½' },
  { emoji: 'ðŸš€', text: 'ÐžÐ±ÑŠÑÑÐ½Ð¸ ÐºÐ¾Ð½Ñ†ÐµÐ¿Ñ†Ð¸ÑŽ ÐºÐ¾ÑÐ¼Ð¾ÑÐ°' },
  { emoji: 'ðŸ§³', text: 'Ð¡Ð¾ÑÑ‚Ð°Ð²ÑŒ Ð¿Ð»Ð°Ð½ Ð¿ÑƒÑ‚ÐµÑˆÐµÑÑ‚Ð²Ð¸Ñ' },
  { emoji: 'ðŸ‹ï¸â€â™‚ï¸', text: 'Ð¡Ð´ÐµÐ»Ð°Ð¹ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ñƒ Ñ‚Ñ€ÐµÐ½Ð¸Ñ€Ð¾Ð²Ð¾Ðº' },
  { emoji: 'ðŸŽ§', text: 'ÐŸÐ¾Ð´Ð±ÐµÑ€Ð¸ Ð¿Ð»ÐµÐ¹Ð»Ð¸ÑÑ‚ Ð´Ð»Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹' },
  { emoji: 'ðŸ’¼', text: 'ÐŸÐ¾Ð¼Ð¾Ð³Ð¸ Ð½Ð°Ð¿Ð¸ÑÐ°Ñ‚ÑŒ Ñ€ÐµÐ·ÑŽÐ¼Ðµ' },
  { emoji: 'ðŸ’¬', text: 'Ð¡Ð¾ÑÑ‚Ð°Ð²ÑŒ Ñ‚ÐµÐºÑÑ‚ Ð´Ð»Ñ Ð¿Ñ€ÐµÐ·ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ð¸' },
  { emoji: 'ðŸŒ', text: 'Ð˜Ð½Ñ‚ÐµÑ€ÐµÑÐ½Ñ‹Ðµ Ð¼ÐµÑÑ‚Ð° Ð² Ð¼Ð¸Ñ€Ðµ' },
  { emoji: 'ðŸ‘¨â€ðŸ³', text: 'ÐŸÑ€ÐµÐ´Ð»Ð¾Ð¶Ð¸ Ð¾Ñ€Ð¸Ð³Ð¸Ð½Ð°Ð»ÑŒÐ½Ð¾Ðµ Ð±Ð»ÑŽÐ´Ð¾' },
  { emoji: 'ðŸ“…', text: 'Ð—Ð°Ð¿Ð»Ð°Ð½Ð¸Ñ€ÑƒÐ¹ Ð½ÐµÐ´ÐµÐ»ÑŽ' },
  { emoji: 'ðŸŽ¤', text: 'ÐŸÐ¾Ð¼Ð¾Ð³Ð¸ Ð¿Ð¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²Ð¸Ñ‚ÑŒ Ñ€ÐµÑ‡ÑŒ' },
  { emoji: 'ðŸ“±', text: 'ÐŸÐ¾Ð´Ð±ÐµÑ€Ð¸ Ð¿Ð¾Ð»ÐµÐ·Ð½Ñ‹Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ' },
  { emoji: 'âœï¸', text: 'ÐÐ°Ð¿Ð¸ÑˆÐ¸ Ð¿Ð¸ÑÑŒÐ¼Ð¾' },
  { emoji: 'ðŸ–ï¸', text: 'ÐžÑ€Ð³Ð°Ð½Ð¸Ð·ÑƒÐ¹ Ð¾Ñ‚Ð¿ÑƒÑÐº' },
  { emoji: 'ðŸ’¼', text: 'ÐŸÐ¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÑŒ Ðº ÑÐ¾Ð±ÐµÑÐµÐ´Ð¾Ð²Ð°Ð½Ð¸ÑŽ' },
  { emoji: 'ðŸŽ', text: 'ÐŸÐ¾ÑÐ¾Ð²ÐµÑ‚ÑƒÐ¹ Ð¿Ð¾Ð´Ð°Ñ€Ð¾Ðº' },
  { emoji: 'ðŸ›‹ï¸', text: 'ÐŸÑ€ÐµÐ´Ð»Ð¾Ð¶Ð¸ Ð¸Ð´ÐµÐ¸ Ð´Ð»Ñ Ð´ÐµÐºÐ¾Ñ€Ð°' },
  { emoji: 'âœˆï¸', text: 'ÐŸÐ¾ÑÑ‚Ñ€Ð¾Ð¹ Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚ Ð¿ÑƒÑ‚ÐµÑˆÐµÑÑ‚Ð²Ð¸Ñ' },
  { emoji: 'ðŸ“„', text: 'ÐžÐ±ÑŠÑÑÐ½Ð¸ ÑÐ»Ð¾Ð¶Ð½Ñ‹Ð¹ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚' }, // Ð·Ð°Ð¼ÐµÐ½Ð°
  { emoji: 'ðŸ› ï¸', text: 'ÐžÐ±ÑŠÑÑÐ½Ð¸, ÐºÐ°Ðº Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ Ð³Ð°Ð´Ð¶ÐµÑ‚Ñ‹' }, // Ð·Ð°Ð¼ÐµÐ½Ð°
  { emoji: 'ðŸ¦¸â€â™‚ï¸', text: 'ÐŸÑ€Ð¸Ð´ÑƒÐ¼Ð°Ð¹ ÑÑƒÐ¿ÐµÑ€Ð³ÐµÑ€Ð¾Ñ' }, // Ð·Ð°Ð¼ÐµÐ½Ð°
  { emoji: 'âœˆï¸', text: 'Ð”Ð°Ð¹ ÑÐ¾Ð²ÐµÑ‚Ñ‹ Ð´Ð»Ñ Ð¿Ð¾ÐµÐ·Ð´ÐºÐ¸ Ð² Ð½Ð¾Ð²ÑƒÑŽ ÑÑ‚Ñ€Ð°Ð½Ñƒ' }, // Ð·Ð°Ð¼ÐµÐ½Ð°
  { emoji: 'ðŸ’¬', text: 'Ð”Ð°Ð¹ ÑÐ¾Ð²ÐµÑ‚Ñ‹ Ð´Ð»Ñ Ð²Ñ‹ÑÑ‚ÑƒÐ¿Ð»ÐµÐ½Ð¸Ñ' }, // Ð·Ð°Ð¼ÐµÐ½Ð°

  { emoji: 'âœˆï¸', text: 'Ð Ð°ÑÑÑ‡Ð¸Ñ‚Ð°Ð¹ ÑÐ»Ð¾Ð¶Ð½Ñ‹Ðµ Ð¿Ñ€Ð¾Ñ†ÐµÐ½Ñ‚Ñ‹' },
  { emoji: 'âœˆï¸', text: 'ÐÐ°Ð¿Ð¸ÑˆÐ¸ ÑÑ‚Ð¸Ñ…Ð¾Ñ‚Ð²Ð¾Ñ€ÐµÐ½Ð¸Ðµ Ð¾ Ð»ÑŽÐ±Ð²Ð¸?' },
  { emoji: 'âœˆï¸', text: 'Ð“Ð´Ðµ Ñ…Ð¾Ñ€Ð¾ÑˆÐ°Ñ Ð¿Ð¾Ð³Ð¾Ð´Ð° Ð½Ð° Ð²Ñ‹Ñ…Ð¾Ð´Ð½Ñ‹Ñ…?' },
  { emoji: 'âœˆï¸', text: 'Ð˜Ð·Ð¾Ð±Ñ€Ð°Ð·Ð¸ ÐœÐ¾ÑÐºÐ²Ñƒ Ð² ÑÑ‚Ð¸Ð»Ðµ Ð”Ð°Ð»Ð¸' },
  { emoji: 'âœˆï¸', text: 'ÐšÐ°Ðº Ð½Ð°Ð¿Ð¸ÑÐ°Ñ‚ÑŒ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ Ð½Ð° Python...' },
  { emoji: 'âœˆï¸', text: 'ÐžÐ±ÑŠÑÑÐ½Ð¸, ÐºÐ°Ðº Ñ€ÐµÑˆÐ¸Ñ‚ÑŒ Ð¸Ð½Ñ‚ÐµÐ³Ñ€Ð°Ð»' },
];

const newMessageText = ref('');
const targetText = ref(prompts[0].text);

function getRandomPrompts(count = 3) {
  const shuffled = prompts.sort(() => 0.5 - Math.random());
  return shuffled.slice(0, count);
}

onMounted(() => {
  let index = 0;
  let phase = 1;
  const caret = 'â¬¤';

  function typeText() {
    if (index >= targetText.value.length + 10) {
      phase = -1;
    }

    if (index <= 1) {
      targetText.value = getRandomPrompts(1)[0].text;
      phase = 1;
    }

    newMessageText.value = targetText.value.substring(0, index + phase) + caret;
    index += phase;
    setTimeout(typeText, 42);
  }
  typeText();
});
</script>
<style>
.msg-btn {
  transition: ease-in-out 0.2s;
}

.msg-btn:hover {
  transform: rotate(-90deg);
}
</style>
